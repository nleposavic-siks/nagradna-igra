<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cyber-Strike | Neural Link</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap");

      :root {
        --neon-blue: #00f2ff;
        --neon-pink: #ff00ff;
        --glass: rgba(0, 20, 30, 0.85);
        --border: 2px solid var(--neon-blue);
      }

      * {
        box-sizing: border-box;
        cursor: crosshair;
      }

      body,
      html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background-color: #050505;
        color: white;
        font-family: "Rajdhani", sans-serif;
        overflow: hidden;
      }

      /* Animated Grid Background */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: linear-gradient(var(--neon-blue) 1px, transparent 1px),
          linear-gradient(90deg, var(--neon-blue) 1px, transparent 1px);
        background-size: 50px 50px;
        background-position: center;
        opacity: 0.1;
        transform: perspective(500px) rotateX(60deg);
        z-index: -1;
      }

      /* HUD elements */
      #hud {
        position: fixed;
        top: 20px;
        width: 100%;
        display: flex;
        justify-content: space-around;
        z-index: 50;
        pointer-events: none;
        display: none;
      }

      .stat-box {
        background: var(--glass);
        padding: 10px 30px;
        border: 1px solid var(--neon-blue);
        box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);
        text-align: center;
      }

      .label {
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 2px;
        color: var(--neon-blue);
      }
      .value {
        font-family: "Orbitron", sans-serif;
        font-size: 1.8rem;
        display: block;
      }

      /* Modals */
      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 100;
        backdrop-filter: blur(8px);
      }

      .modal {
        background: var(--glass);
        border: var(--border);
        padding: 40px;
        max-width: 500px;
        text-align: center;
        box-shadow: 0 0 50px rgba(0, 242, 255, 0.2);
        clip-path: polygon(10% 0, 100% 0, 100% 90%, 90% 100%, 0 100%, 0 10%);
      }

      h1 {
        font-family: "Orbitron", sans-serif;
        margin-top: 0;
        color: var(--neon-blue);
        text-shadow: 0 0 10px var(--neon-blue);
      }

      .reward-tier {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin: 20px 0;
        text-align: left;
      }

      .tier-item {
        border-left: 3px solid var(--neon-pink);
        padding-left: 10px;
        margin-bottom: 5px;
      }

      .btn {
        background: transparent;
        border: 1px solid var(--neon-pink);
        color: var(--neon-pink);
        padding: 15px 40px;
        font-family: "Orbitron", sans-serif;
        font-size: 1rem;
        text-transform: uppercase;
        transition: 0.3s;
        margin-top: 20px;
      }

      .btn:hover {
        background: var(--neon-pink);
        color: white;
        box-shadow: 0 0 20px var(--neon-pink);
      }

      /* Canvas Game Area */
      canvas {
        display: block;
      }

      /* Copy Section */
      .copy-area {
        display: flex;
        background: rgba(255, 255, 255, 0.1);
        padding: 10px;
        margin-top: 20px;
        border-radius: 4px;
      }
      #code-display {
        flex-grow: 1;
        border: none;
        background: none;
        color: var(--neon-blue);
        font-family: monospace;
        font-size: 1.2rem;
        outline: none;
      }
      .copy-btn {
        background: var(--neon-blue);
        border: none;
        color: black;
        padding: 5px 15px;
        font-weight: bold;
      }

      .hidden {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <div id="hud">
      <div class="stat-box">
        <span class="label">Score</span>
        <span id="score-val" class="value">00</span>
      </div>
      <div class="stat-box">
        <span class="label">Time Remaining</span>
        <span id="timer-val" class="value">30s</span>
      </div>
    </div>

    <div id="start-overlay" class="overlay">
      <div class="modal">
        <h1>SYSTEM ACCESS</h1>
        <p>
          Pop the floating Data Cores to extract credit rewards. Higher speed
          equals higher rewards.
        </p>
        <div class="reward-tier">
          <div class="tier-item">5 Cores: <strong>5€ Code</strong></div>
          <div class="tier-item">10 Cores: <strong>10€ Code</strong></div>
          <div class="tier-item">20 Cores: <strong>25€ Code</strong></div>
          <div class="tier-item">30+ Cores: <strong>50€ Code</strong></div>
        </div>
        <button class="btn" onclick="initGame()">INITIALIZE LINK</button>
      </div>
    </div>

    <div id="win-overlay" class="overlay hidden">
      <div class="modal">
        <h1 id="win-title">EXTRACTION COMPLETE</h1>
        <p id="win-msg">You secured 0 data cores.</p>
        <div class="copy-area">
          <input type="text" id="code-display" readonly value="VOID-ZERO" />
          <button class="copy-btn" onclick="copyCode()">COPY</button>
        </div>
        <p id="copy-note" style="color: var(--neon-blue); margin-top: 10px"></p>
        <button class="btn" onclick="location.reload()">RETRY</button>
      </div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
      const canvas = document.getElementById("gameCanvas");
      const ctx = canvas.getContext("2d");
      let score = 0;
      let timeLeft = 30;
      let gameActive = false;
      let cores = [];
      let timerInterval;

      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener("resize", resize);
      resize();

      class Core {
        constructor() {
          this.x = Math.random() * (canvas.width - 60) + 30;
          this.y = Math.random() * (canvas.height - 60) + 30;
          this.radius = 25;
          this.speedX = (Math.random() - 0.5) * 6;
          this.speedY = (Math.random() - 0.5) * 6;
          this.pulse = 0;
        }

        draw() {
          this.pulse += 0.1;
          let pulseSize = Math.sin(this.pulse) * 5;

          // Outer Glow
          ctx.shadowBlur = 15 + pulseSize;
          ctx.shadowColor = "#00f2ff";

          // Hexagon/Circle core
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.radius + pulseSize, 0, Math.PI * 2);
          ctx.strokeStyle = "#00f2ff";
          ctx.lineWidth = 2;
          ctx.stroke();

          ctx.beginPath();
          ctx.arc(this.x, this.y, 5, 0, Math.PI * 2);
          ctx.fillStyle = "#ff00ff";
          ctx.fill();
          ctx.shadowBlur = 0;
        }

        update() {
          this.x += this.speedX;
          this.y += this.speedY;
          if (this.x < 30 || this.x > canvas.width - 30) this.speedX *= -1;
          if (this.y < 30 || this.y > canvas.height - 30) this.speedY *= -1;
        }
      }

      function initGame() {
        document.getElementById("start-overlay").classList.add("hidden");
        document.getElementById("hud").style.display = "flex";
        gameActive = true;
        score = 0;
        timeLeft = 30;

        // Spawn initial cores
        for (let i = 0; i < 6; i++) cores.push(new Core());

        timerInterval = setInterval(() => {
          timeLeft--;
          document.getElementById("timer-val").innerText = timeLeft + "s";
          if (timeLeft <= 0) endGame();
        }, 1000);

        animate();
      }

      function animate() {
        if (!gameActive) return;
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        cores.forEach((core) => {
          core.update();
          core.draw();
        });

        requestAnimationFrame(animate);
      }

      canvas.addEventListener("mousedown", (e) => {
        if (!gameActive) return;

        cores.forEach((core, index) => {
          const dist = Math.hypot(e.clientX - core.x, e.clientY - core.y);
          if (dist < core.radius + 10) {
            cores.splice(index, 1);
            score++;
            document.getElementById("score-val").innerText = score
              .toString()
              .padStart(2, "0");

            // Respawn cores to keep it active
            setTimeout(() => cores.push(new Core()), 200);
          }
        });
      });

      function endGame() {
        gameActive = false;
        clearInterval(timerInterval);
        document.getElementById("win-overlay").classList.remove("hidden");

        const codeDisp = document.getElementById("code-display");
        const msg = document.getElementById("win-msg");

        let reward = "VOID-0";
        if (score >= 30) reward = "CYBER-50-PRO";
        else if (score >= 20) reward = "NEURAL-25-WIN";
        else if (score >= 10) reward = "GRID-10-REWARD";
        else if (score >= 5) reward = "LINK-5-CREDIT";

        msg.innerText = `Extraction complete. You secured ${score} Data Cores.`;
        codeDisp.value = reward;
      }

      function copyCode() {
        const codeInput = document.getElementById("code-display");
        codeInput.select();
        navigator.clipboard.writeText(codeInput.value);
        document.getElementById("copy-note").innerText =
          "CREDITS TRANSFERRED TO CLIPBOARD";
      }
    </script>
  </body>
</html>
